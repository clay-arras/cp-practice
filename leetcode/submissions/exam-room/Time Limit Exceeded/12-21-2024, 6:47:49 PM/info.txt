{"id":1485034062,"question_id":885,"lang":"cpp","lang_name":"C++","time":"10 months, 3 weeks","timestamp":1734835669,"status":14,"status_display":"Time Limit Exceeded","runtime":"N/A","url":"/submissions/detail/1485034062/","is_pending":"Not Pending","title":"Exam Room","memory":"N/A","code":"class ExamRoom {\npublic:\n    // Store {distance, {start, end}}\n    set<pair<int, pair<int, int>>> intervals;\n    int N;\n    set<int> seated;  // Just to keep track of occupied seats\n    \n    ExamRoom(int n) {\n        N = n;\n    }\n    \n    int seat() {\n        if (seated.empty()) {\n            seated.insert(0);\n            return 0;\n        }\n        \n        // Consider the maximum possible distance\n        int maxDist = -1;\n        int pos = -1;\n        \n        // Check starting gap if exists\n        if (!seated.count(0)) {\n            int first = *seated.begin();\n            maxDist = first;\n            pos = 0;\n        }\n        \n        // Check intervals between seated students\n        for (auto& p : intervals) {\n            int dist = (p.second.second - p.second.first) / 2;\n            int currPos = p.second.first + dist;\n            if (dist > maxDist) {\n                maxDist = dist;\n                pos = currPos;\n            }\n        }\n        \n        // Check ending gap if exists\n        if (!seated.count(N-1)) {\n            int last = *seated.rbegin();\n            int dist = N - 1 - last;\n            if (dist > maxDist) {\n                maxDist = dist;\n                pos = N - 1;\n            }\n        }\n        \n        // Add new seat and update intervals\n        seated.insert(pos);\n        updateIntervals();\n        return pos;\n    }\n    \n    void leave(int p) {\n        seated.erase(p);\n        updateIntervals();\n    }\n    \nprivate:\n    void updateIntervals() {\n        intervals.clear();\n        if (seated.empty()) return;\n        \n        auto it = seated.begin();\n        int prev = *it;\n        ++it;\n        \n        // Add intervals between occupied seats\n        for (; it != seated.end(); ++it) {\n            int dist = (*it - prev) / 2;\n            intervals.insert({dist, {prev, *it}});\n            prev = *it;\n        }\n    }\n};","compare_result":"111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110","title_slug":"exam-room","has_notes":false,"flag_type":1,"frontend_id":975}