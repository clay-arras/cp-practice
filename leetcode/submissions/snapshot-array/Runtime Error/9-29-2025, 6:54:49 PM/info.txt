{"id":1786781979,"question_id":1249,"lang":"cpp","lang_name":"C++","time":"1 month, 2 weeks","timestamp":1759197289,"status":15,"status_display":"Runtime Error","runtime":"N/A","url":"/submissions/detail/1786781979/","is_pending":"Not Pending","title":"Snapshot Array","memory":"N/A","code":"class SnapshotArray { \nprivate:\n    int lastTrue(int l, int r, function<bool(int)> ok) {\n        l--;\n        for (int diff=r-l; diff>0; diff/=2) \n            if (l + diff <= r && ok(l + diff))\n                l += diff;\n        return l;\n    }\n\n    vector<vector<pair<int, int>>> data; // O(totalCalls)\n    int sn = 0;\n\npublic:\n    SnapshotArray(int length) {\n        data = vector<vector<pair<int, int>>> (length);\n    } \n    void set(int index, int val) {\n        data[index].push_back({sn, val});\n    }\n    int snap() {\n        return sn++;\n    }\n    int get(int index, int snap_id) {\n        if (snap_id == sn) {\n            int sz = data[index].size();\n            return sz ? data[index][sz - 1].second : 0;\n        }\n        int l = 0;\n        int r = data[index].size()-1;\n        \n        int idx = lastTrue(l, r, [&](int t) {\n            return data[index][t].first <= snap_id;\n        });\n        return data[index][idx].second;\n    }\n};\n\n\n/**\n * Your SnapshotArray object will be instantiated and called as such:\n * SnapshotArray* obj = new SnapshotArray(length);\n * obj->set(index,val);\n * int param_2 = obj->snap();\n * int param_3 = obj->get(index,snap_id);\n */","compare_result":"1111000000000000000000000000000000000000000000000000000000000000000000000000","title_slug":"snapshot-array","has_notes":false,"flag_type":1,"frontend_id":1248}