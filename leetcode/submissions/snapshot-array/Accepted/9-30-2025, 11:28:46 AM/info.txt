{"id":1787541346,"question_id":1249,"lang":"cpp","lang_name":"C++","time":"1 month, 2 weeks","timestamp":1759256926,"status":10,"status_display":"Accepted","runtime":"118 ms","url":"/submissions/detail/1787541346/","is_pending":"Not Pending","title":"Snapshot Array","memory":"192 MB","code":"class SnapshotArray { \nprivate:\n    int lastTrue(int l, int r, function<bool(int)> ok) {\n        l--;\n        for (int diff=r-l; diff>0; diff/=2) \n            while (l + diff <= r && ok(l + diff))\n                l += diff;\n        return l;\n    }\n\n    vector<vector<pair<int, int>>> data; // O(totalCalls)\n    int sn = 0;\n\npublic:\n    SnapshotArray(int length) {\n        data = vector<vector<pair<int, int>>> (length, vector<pair<int, int>>(1, {-1, 0}));\n    } \n    void set(int index, int val) {\n        data[index].push_back({sn, val});\n    }\n    int snap() {\n        return sn++;\n    }\n    int get(int index, int snap_id) {\n        int l = 0;\n        int r = data[index].size()-1;\n        \n        int idx = lastTrue(l, r, [&](int t) {\n            return data[index][t].first <= snap_id;\n        });\n        return data[index][idx].second;\n    }\n};\n\n\n/**\n * Your SnapshotArray object will be instantiated and called as such:\n * SnapshotArray* obj = new SnapshotArray(length);\n * obj->set(index,val);\n * int param_2 = obj->snap();\n * int param_3 = obj->get(index,snap_id);\n */","compare_result":"1111111111111111111111111111111111111111111111111111111111111111111111111111","title_slug":"snapshot-array","has_notes":false,"flag_type":1,"frontend_id":1249}