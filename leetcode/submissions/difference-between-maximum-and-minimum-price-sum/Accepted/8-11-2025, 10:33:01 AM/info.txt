{"id":1731549047,"question_id":2627,"lang":"cpp","lang_name":"C++","time":"3 months, 1 week","timestamp":1754933581,"status":10,"status_display":"Accepted","runtime":"320 ms","url":"/submissions/detail/1731549047/","is_pending":"Not Pending","title":"Difference Between Maximum and Minimum Price Sum","memory":"181.2 MB","code":"class Solution {\npublic:\n    const static int MX = 1e5+5;\n    const static long long MXV = 1e18;\n    int N;\n    vector<int> adj_list[MX];\n    vector<int> p;\n    vector<bool> vis;\n    vector<int> state;\n    vector<pair<long long, int>> memo; // cost of path, diameter node\n    unordered_map<int, long long> diam; // cost from node to root of diam\n\n    pair<long long, long long> furth; // dist, node\n    void dfs1(long long s, long long dist) {\n        vis[s] = true;\n        furth = max(furth, {dist, s});\n        for (long long i : adj_list[s]) {\n            if (!vis[i])\n                dfs1(i, dist+p[i]);\n        }\n    }\n\n    bool dfs2(long long s, long long dist, long long ed) {\n        vis[s] = true;\n        bool ok = (s == ed);\n        for (long long i : adj_list[s]) {\n            if (!vis[i])\n                ok |= dfs2(i, dist + p[i], ed);\n        }\n        if (ok) diam[s] = dist;\n        return ok;\n    }\n\n    pair<long long, long long> dp(long long s) {\n        if (state[s] == 2)\n            return memo[s];\n        if (state[s] == 1)\n            return {MXV, -1};\n        if (diam.count(s))\n            return memo[s] = {0, s};\n        state[s] = 1;\n\n        pair<long long, long long> curr = {MXV, -1};\n        for (long long i : adj_list[s]) {\n            auto tmp = dp(i);\n            curr = min(curr, {tmp.first + p[s], tmp.second});\n        }\n        state[s] = 2;\n        if (curr == pair<long long, long long>{MXV, -1})\n            state[s] = 0;\n        return memo[s] = curr;\n    }\n\n    long long maxOutput(int n, vector<vector<int>>& edges, vector<int>& price) {\n \n        N = n;\n        p = price;\n        for (auto e : edges) {\n            adj_list[e[0]].push_back(e[1]);\n            adj_list[e[1]].push_back(e[0]);\n        }\n        vis = vector<bool>(n, false);\n        furth = {-1, -1};\n        dfs1(0, p[0]);\n        int st = furth.second;\n\n        vis = vector<bool>(n, false);\n        furth = {-1, -1};\n        dfs1(st, p[st]);\n        int ed = furth.second;\n\n        vis = vector<bool>(n, false);\n        dfs2(st, p[st], ed);\n\n        memo = vector<pair<long long, int>>(n, {MXV, -1});\n        state = vector<int> (n, 0);\n        for (int i=0; i<N; i++)\n            dp(i);\n\n        long long ans = 0;\n        for (int i=0; i<N; i++) {\n            long long sum = memo[i].first;\n            assert(diam.count(memo[i].second));\n            long long l = diam[memo[i].second];\n            long long r = diam[ed] - diam[memo[i].second] + p[memo[i].second];\n            ans = max(ans, sum + max(l, r) - p[i]);\n        }\n        return ans;\n    }\n};","compare_result":"1111111111111111111111111111111111111111111111111111111111","title_slug":"difference-between-maximum-and-minimum-price-sum","has_notes":null,"flag_type":1,"frontend_id":1163}