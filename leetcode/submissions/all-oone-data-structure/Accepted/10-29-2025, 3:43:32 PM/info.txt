{"id":1815467557,"question_id":432,"lang":"cpp","lang_name":"C++","time":"2 weeks, 6 days","timestamp":1761777812,"status":10,"status_display":"Accepted","runtime":"85 ms","url":"/submissions/detail/1815467557/","is_pending":"Not Pending","title":"All O`one Data Structure","memory":"96.2 MB","code":"class AllOne {\npublic:\n    list<pair<int, unordered_set<string>>> ls;\n    unordered_map<string, decltype(ls.begin())> m;\n\n    AllOne() {\n        ls.push_back({0, {\"\"}});\n    }\n    \n    void inc(string key) {\n        if (!m.count(key)) {\n            ls.begin()->second.insert(key); \n            m[key] = ls.begin();\n        }\n\n        auto it = m[key];\n        if (next(it) == ls.end() || next(it)->first != it->first + 1) \n            ls.insert(next(it), {it->first + 1, {}});\n\n        next(it)->second.insert(key);\n        m[key] = next(it);\n\n        it->second.erase(key);    \n        if (it->second.empty())\n            ls.erase(it);\n    }\n    \n    void dec(string key) {\n        auto it = m[key];\n        if (prev(it)->first != it->first - 1) \n            ls.insert(it, {it->first - 1, {}});\n\n        prev(it)->second.insert(key);\n        m[key] = prev(it);\n\n        it->second.erase(key);    \n        if (it->second.empty())\n            ls.erase(it);\n    }\n    \n    string getMaxKey() {\n        auto it = ls.rbegin();\n        if (it->first == 0)\n            return \"\";\n        return *it->second.begin();\n    }\n    \n    string getMinKey() {\n        auto it = ls.begin();\n        if (next(it) == ls.end())\n            return \"\";\n        advance(it, 1);\n        return *it->second.begin();\n    }\n};\n\n/**\n * Your AllOne object will be instantiated and called as such:\n * AllOne* obj = new AllOne();\n * obj->inc(key);\n * obj->dec(key);\n * string param_3 = obj->getMaxKey();\n * string param_4 = obj->getMinKey();\n */","compare_result":"111111111111111111111111","title_slug":"all-oone-data-structure","has_notes":false,"flag_type":1,"frontend_id":1330}