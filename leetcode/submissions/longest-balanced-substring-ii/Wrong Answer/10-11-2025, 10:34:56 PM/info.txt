{"id":1799040015,"question_id":4056,"lang":"cpp","lang_name":"C++","time":"1Â month","timestamp":1760247296,"status":11,"status_display":"Wrong Answer","runtime":"N/A","url":"/submissions/detail/1799040015/","is_pending":"Not Pending","title":"Longest Balanced Substring II","memory":"N/A","code":"#include <bits/stdc++.h>\nusing namespace std;\n\nclass Solution {\npublic:\n    struct TupleHash {\n        size_t operator()(const std::tuple<int, int, int>& t) const {\n            size_t h1 = std::hash<int>{}(std::get<0>(t));\n            size_t h2 = std::hash<int>{}(std::get<1>(t));\n            size_t h3 = std::hash<int>{}(std::get<2>(t));\n            return h1 ^ (h2 << 1) ^ (h3 << 2);\n        }\n    };\n    \n    int longestBalanced(string s) {\n        int N = (int)s.size();\n        unordered_map<tuple<int, int, int>, int, TupleHash> m;\n\n        // NEW: seed base state so substrings from 0 are counted\n        m[make_tuple(0,0,0)] = -1;\n\n        int a = 0, b = 0, c = 0;\n        int ans = 0;\n        \n        for (int i=0; i<N; i++) {\n            if (s[i] == 'a') a++;\n            if (s[i] == 'b') b++;\n            if (s[i] == 'c') c++;\n\n            for (int k=1; k<8; k++) {\n                bool doA = (k & 1); \n                bool doB = (k & 2);\n                bool doC = (k & 4);\n\n                // CHANGE: use ONE normalization (subtract min) for BOTH lookup and insert\n                int mn = min({(doA ? a : INT_MAX), (doB ? b : INT_MAX), (doC ? c : INT_MAX)});\n                auto key = make_tuple(\n                    (doA ? a - mn : -a),\n                    (doB ? b - mn : -b),\n                    (doC ? c - mn : -c)\n                );\n\n                auto it = m.find(key);\n                if (it != m.end()) {\n                    // CHANGE: no +1 when base is at -1\n                    ans = max(ans, i - it->second);\n                }\n                if (it == m.end()) {\n                    m[key] = i;\n                }\n            }\n        }\n        return ans;\n    }\n};\n","compare_result":"1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111011111111111111111111111111111111111111111111111111111111111011111110111111111111111111111111110111111111111111111011110111111111111111111111111111111110111111111111111111111111111111111111110111111111111111111111111111111111111111111111111111111111111111011111111111111111111111111111111011110111111111111111111111111111111111111111011111111111111111111111111111111011111111111111111111111111111111111111111111111101111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110111111111111111111111101111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111","title_slug":"longest-balanced-substring-ii","has_notes":false,"flag_type":1,"frontend_id":1263}