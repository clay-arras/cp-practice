{"id":1803925883,"question_id":3957,"lang":"cpp","lang_name":"C++","time":"1Â month","timestamp":1760675752,"status":15,"status_display":"Runtime Error","runtime":"N/A","url":"/submissions/detail/1803925883/","is_pending":"Not Pending","title":"Sum of Perfect Square Ancestors","memory":"N/A","code":"class Solution {\npublic:\n    const static int MX = 1e5+7;\n    vector<int> adj_list[MX];\n    vector<bool> visited;\n    multiset<vector<bool>> hash;\n    vector<vector<bool>> factors;\n\n    long long ans = 0;\n    void dfs(int x) {\n        visited[x] = true;\n        ans += hash.count(factors[x]);\n        hash.insert(factors[x]);\n\n        for (int i : adj_list[x]) {\n            if (!visited[i])\n                dfs(i);\n        }\n        hash.erase(hash.find(factors[x]));\n    }\n\n    long long sumOfAncestors(int n, vector<vector<int>>& edges, vector<int>& nums) {\n        for (auto e : edges) {\n            adj_list[e[0]].push_back(e[1]);\n            adj_list[e[1]].push_back(e[0]);\n        }\n\n        int mx = *max_element(nums.begin(), nums.end());\n        for (int i : nums) {\n            vector<bool> odds(sqrt(mx)+1, false);\n            for (int f=2; f<=sqrt(i) + 1; f++) {\n                int cnt = 0;\n                for (; i%f == 0; cnt++)\n                    i /= f;\n                odds[f] = (bool)(cnt % 2);\n            }\n            factors.push_back(odds);\n        }\n        visited = vector<bool>(n, 0);\n        dfs(0);\n\n        return ans;\n    }\n};","compare_result":"11111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","title_slug":"sum-of-perfect-square-ancestors","has_notes":false,"flag_type":1,"frontend_id":1268}