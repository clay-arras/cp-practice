{"id":1803931753,"question_id":3957,"lang":"cpp","lang_name":"C++","time":"1Â month","timestamp":1760676266,"status":11,"status_display":"Wrong Answer","runtime":"N/A","url":"/submissions/detail/1803931753/","is_pending":"Not Pending","title":"Sum of Perfect Square Ancestors","memory":"N/A","code":"class Solution {\npublic:\n    const static int MX = 1e5+7;\n    vector<int> adj_list[MX];\n    vector<bool> visited;\n    multiset<set<int>> hash;\n    vector<set<int>> factors;\n\n    long long ans = 0;\n    void dfs(int x) {\n        visited[x] = true;\n        ans += hash.count(factors[x]);\n        hash.insert(factors[x]);\n\n        for (int i : adj_list[x]) {\n            if (!visited[i])\n                dfs(i);\n        }\n        auto it = hash.find(factors[x]);\n        assert(it != hash.end());\n        hash.erase(it);\n    }\n\n    long long sumOfAncestors(int n, vector<vector<int>>& edges, vector<int>& nums) {\n        for (auto e : edges) {\n            adj_list[e[0]].push_back(e[1]);\n            adj_list[e[1]].push_back(e[0]);\n        }\n\n        int mx = *max_element(nums.begin(), nums.end());\n        for (int i : nums) {\n            set<int> odds;\n            for (int f=2; f<=sqrt(i) + 1; f++) {\n                int cnt = 0;\n                for (; i%f == 0; cnt++) \n                    i /= f;\n                if (cnt % 2) odds.insert(f);\n            }\n            odds.insert(i);\n            factors.push_back(odds);\n        }\n\n        visited = vector<bool>(n, 0);\n        dfs(0);\n        return ans;\n    }\n};","compare_result":"11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111110011111110100","title_slug":"sum-of-perfect-square-ancestors","has_notes":false,"flag_type":1,"frontend_id":1270}